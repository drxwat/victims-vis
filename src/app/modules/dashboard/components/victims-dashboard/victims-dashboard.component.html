<p class="absolute-count">N = {{ number$ | async }}</p>
<form [formGroup]="filtersGroup" class="filters">
  <mat-form-field class="filters-field">
    <mat-label>Тип преступления</mat-label>
    <mat-select formControlName="crime_type">
      <mat-option *ngFor="let type of crimeTypes$ | async"
        [disabled]="!isFilterHasValue('crime_type') && !(crimeTypesCount$ | async).has(type)" [value]="type">
        {{type}}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <mat-form-field class="filters-field">
    <mat-label>Место преступления</mat-label>
    <mat-select formControlName="crime_place_grouped">
      <mat-option *ngFor="let place of crimePlaces$ | async"
        [disabled]="!isFilterHasValue('crime_place_grouped') && !(crimePlacesCount$ | async).has(place)"
        [value]="place">
        {{place}}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <button mat-icon-button (click)="resetFilters()" class="filters-field">
    <mat-icon>clear</mat-icon>
  </button>
</form>

<mat-grid-list *ngIf="loaded$ | async" [cols]="gridColumns" rowHeight="4:1" gutterSize="25px">
  <!-- FIRST ROW -->
  <mat-grid-tile rowspan="2">
    <app-density-plot [dataVector]="age$ | async" title="Распределение возраста">
    </app-density-plot>
  </mat-grid-tile>
  <mat-grid-tile rowspan="2">
    <app-bar-plot [dataGroupsCount]="income$ | async" title="Благосостояние"></app-bar-plot>
  </mat-grid-tile>
  <mat-grid-tile>
    <app-single-bar-plot [dataBiGroupCount]="isMale$ | async" title="Соотношение мужчин и женщин"></app-single-bar-plot>
  </mat-grid-tile>
  <mat-grid-tile>
    <app-single-bar-plot [dataBiGroupCount]="isCity$ | async" title="Соотношение горожан и жителей др. насел. пунктов">
    </app-single-bar-plot>
  </mat-grid-tile>

  <!-- SECOND ROW -->
  <mat-grid-tile rowspan="2">
    <app-bar-plot [dataGroupsCount]="education$ | async" title="Уровень образования">
    </app-bar-plot>
  </mat-grid-tile>
  <mat-grid-tile rowspan="2">
    <app-bar-plot [dataGroupsCount]="episodesAmount$ | async" title="Кол-во эпизодов (не более 5 шт) за 5 лет"
      showGroupNames="true">
    </app-bar-plot>
  </mat-grid-tile>
  <mat-grid-tile rowspan="2">
    <app-bar-plot [dataGroupsCount]="socialStatus$ | async" title="Социальный статус" showGroupNames="true">
    </app-bar-plot>
  </mat-grid-tile>

</mat-grid-list>